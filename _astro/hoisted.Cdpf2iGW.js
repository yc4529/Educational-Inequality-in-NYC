import{m as h}from"./maplibre-gl.CwxBg0Yq.js";import"./hoisted.RlhmG3H2.js";class b extends HTMLElement{constructor(){super();var t=new h.Map({container:this.dataset.container||"maplibre-map",interactive:this.dataset.interactive?JSON.parse(this.dataset.interactive):!1,center:[this.dataset.longitude?parseFloat(this.dataset.longitude):0,this.dataset.latitude?parseFloat(this.dataset.latitude):0],zoom:this.dataset.zoom?parseFloat(this.dataset.zoom):void 0,style:this.dataset.mapstyle});t.on("load",()=>{const m=document.querySelectorAll("section"),u=new IntersectionObserver(c=>{c.forEach(e=>{if(e.isIntersecting){e.target.classList.add("active");const s=e.target.getAttribute("data-center"),o=s?JSON.parse(s):void 0,i=e.target.getAttribute("data-zoom"),n=e.target.getAttribute("data-pitch"),p=e.target.getAttribute("data-bearing"),g=e.target.getAttribute("data-layers"),l=g?JSON.parse(g):void 0;l&&l.forEach(a=>{a["data-type"]==="geojson"&&fetch(a.url).then(r=>r.json()).then(r=>{r.features.forEach(d=>{d.geometry||(d.geometry={type:"Point",coordinates:[Number(d.properties.longitude),Number(d.properties.latitude)]})}),t.getSource(a.id)||t.addSource(a.id,{type:"geojson",data:r}),t.getLayer(a.id)||t.addLayer({id:a.id,type:a["layer-type"],source:a.id,paint:a.paint||{}})})}),t.flyTo({center:o,zoom:i?parseFloat(i):void 0,pitch:n?parseFloat(n):void 0,bearing:p?parseFloat(p):void 0,essential:!0})}else if(!e.target.getAttribute("data-persist")){e.target.classList.remove("active");const s=e.target.getAttribute("data-layers"),o=s?JSON.parse(s):void 0;o&&o.forEach(i=>{t.getLayer(i.id)&&t.removeLayer(i.id),t.getSource(i.id)&&t.removeSource(i.id)})}})},{threshold:.5});m.forEach(c=>u.observe(c))})}}window.customElements.define("maplibre-map",b);
